<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>æ™ºèƒ½å•†åŸ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/youpin-tab-component.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Icons", "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #000000;
        }

        .iphone-container {
            width: 393px;
            height: 852px;
            background-color: #1E1E1E;
            border-radius: 54px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .content-area {
            height: calc(100% - 47px);
            background-color: #ffffff;
        }

        .bottom-nav {
            height: 84px;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* youpin-tabs.css å·²ç»åŒ…å«äº†æ‰€æœ‰å¿…è¦çš„æ ·å¼ */

        .product-card {
            transition: transform 0.2s;
        }

        .product-card:active {
            transform: scale(0.98);
        }

        .carousel-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
        }

        .carousel-indicator.active {
            background-color: rgba(255, 255, 255, 0.8);
        }
    </style>


</head>
<body class="min-h-screen flex items-center justify-center">
    <!-- iPhone å®¹å™¨ -->
    <div class="iphone-container mx-auto">
        <!-- iPhone çŠ¶æ€æ  -->
        <div class="w-full h-[47px] bg-black px-5 flex items-center justify-between text-white text-[14px] font-medium">
            <div class="flex items-center space-x-1">
                <!-- ä¿¡å·å›¾æ ‡ -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M2 20h.01"></path>
                    <path d="M7 20v-4"></path>
                    <path d="M12 20v-8"></path>
                    <path d="M17 20V8"></path>
                    <path d="M22 4v16"></path>
                </svg>
                <span>ä¸­å›½ç§»åŠ¨</span>
                <!-- WiFiå›¾æ ‡ -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 20h.01"></path>
                    <path d="M2 8.82a15 15 0 0 1 20 0"></path>
                    <path d="M5 12.859a10 10 0 0 1 14 0"></path>
                    <path d="M8.5 16.429a5 5 0 0 1 7 0"></path>
                </svg>
            </div>
            <div class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2">9:41</div>
            <div class="flex items-center space-x-1">
                <span>89%</span>
                <!-- ç”µæ± å›¾æ ‡ -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="16" height="10" x="2" y="7" rx="2" ry="2"></rect>
                    <line x1="22" x2="22" y1="11" y2="13"></line>
                </svg>
            </div>
        </div>

        <!-- åŠ¨æ€å²› -->
        <button class="absolute left-1/2 -translate-x-1/2 bg-black transition-all duration-300 ease-out w-[126px] h-[37.5px] -top-0.5 rounded-b-[24px]"></button>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="content-area relative">
            <!-- æ»šåŠ¨å†…å®¹åŒºåŸŸ -->
            <div class="absolute inset-0 bottom-[84px] overflow-y-auto scrollbar-none"
                 style="overflow-y: auto !important; -webkit-overflow-scrolling: touch !important; scrollbar-width: none !important; -ms-overflow-style: none !important;">
                <style>
                    .scrollbar-none::-webkit-scrollbar {
                        display: none !important;
                    }
                </style>

                <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
                <header class="bg-white border-b border-gray-100 sticky top-0 z-20">
                    <div class="flex items-center justify-between px-4 py-3">
                        <h1 class="text-lg font-semibold text-black">æ™ºèƒ½å•†åŸ</h1>
                        <div class="flex items-center space-x-3">
                            <a href="#" class="text-black">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.3-4.3"></path>
                                </svg>
                            </a>
                            <a href="#" class="text-black">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                                    <path d="M3 6h18"></path>
                                    <path d="M16 10a4 4 0 0 1-8 0"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </header>

                <!-- æœç´¢æ  -->
                <section class="px-4 py-3 bg-white">
                    <div class="relative">
                        <input type="search"
                               placeholder="æœç´¢æ™ºèƒ½äº§å“ã€å“ç‰Œã€å‹å·"
                               class="w-full h-11 pl-12 pr-16 rounded-full text-sm bg-gray-50 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-all"
                               autocomplete="off">
                        <div class="absolute left-4 top-1/2 transform -translate-y-1/2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.3-4.3"></path>
                            </svg>
                        </div>
                        <button class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-black text-white px-3 py-1.5 rounded-full text-xs font-medium">
                            æœç´¢
                        </button>
                    </div>

                    <!-- çƒ­é—¨æœç´¢æ ‡ç­¾ -->
                    <div class="mt-3">
                        <div class="flex items-center mb-2">
                            <span class="text-xs text-gray-500 mr-2">çƒ­é—¨æœç´¢:</span>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <button class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">æ™ºèƒ½é—¨é”</button>
                            <button class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">æ™ºèƒ½æ‘„åƒå¤´</button>
                            <button class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">æ™ºèƒ½å¼€å…³</button>
                            <button class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">æ™ºèƒ½éŸ³ç®±</button>
                        </div>
                    </div>
                </section>

                <!-- åˆ†ç±»å¯¼èˆªæ  -->
                <section class="bg-white border-t border-gray-100 sticky top-[60px] z-10">


                    <div class="youpin-tab-component" id="mall-category-tabs">
                        <!-- å·¦ä¾§æ»šåŠ¨æŒ‡ç¤ºå™¨ -->
                        <div class="youpin-tab-indicator-left" id="categoryLeftIndicator"></div>
                        <!-- å³ä¾§æ»šåŠ¨æŒ‡ç¤ºå™¨ -->
                        <div class="youpin-tab-indicator-right" id="categoryRightIndicator"></div>

                        <div class="youpin-tab-scrollable" id="categoryScrollable">
                            <div class="youpin-tab-wrapper">
                                <button class="youpin-tab active" data-category="all">å…¨éƒ¨å•†å“</button>
                                <button class="youpin-tab" data-category="gateway">æ™ºèƒ½ç½‘å…³</button>
                                <button class="youpin-tab" data-category="switch">æ™ºèƒ½å¼€å…³</button>
                                <button class="youpin-tab" data-category="lighting">æ™ºèƒ½ç¯å…·</button>
                                <button class="youpin-tab" data-category="curtain">æ™ºèƒ½çª—å¸˜</button>
                                <button class="youpin-tab" data-category="sensor">ä¼ æ„Ÿå™¨è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="security">å®‰é˜²ç›‘æ§</button>
                                <button class="youpin-tab" data-category="appliance">å®¶ç”µæ§åˆ¶</button>
                                <button class="youpin-tab" data-category="audio">éŸ³å“è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="climate">ç¯å¢ƒæ§åˆ¶</button>
                                <button class="youpin-tab" data-category="kitchen">å¨æˆ¿ç”µå™¨</button>
                                <button class="youpin-tab" data-category="bathroom">å«æµ´è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="bedroom">å§å®¤ç”¨å“</button>
                                <button class="youpin-tab" data-category="living">å®¢å…è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="office">åŠå…¬è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="outdoor">æˆ·å¤–è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="health">å¥åº·è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="entertainment">å¨±ä¹è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="smart-home">æ™ºèƒ½å®¶å±…</button>
                                <button class="youpin-tab" data-category="wearable">å¯ç©¿æˆ´è®¾å¤‡</button>
                                <button class="youpin-tab" data-category="computer">ç”µè„‘æ•°ç </button>
                                <button class="youpin-tab" data-category="mobile">æ‰‹æœºé…ä»¶</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- å•†å“å¯¼èˆªæ  -->
                <section class="bg-white px-4 py-3 border-t border-gray-100">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-6">
                            <button class="text-sm font-medium flex items-center text-black">
                                ç»¼åˆ
                                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-400">
                                    <path d="m7 15 5 5 5-5"></path>
                                    <path d="m7 9 5-5 5 5"></path>
                                </svg>
                            </button>
                            <button class="text-sm text-gray-600 flex items-center" data-sort="sales">
                                é”€é‡
                            </button>
                            <button class="text-sm text-gray-600 flex items-center" data-sort="price">
                                ä»·æ ¼
                            </button>
                        </div>
                        <button class="flex items-center text-sm text-gray-600 border border-gray-200 rounded-full px-3 py-1.5">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                                <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                            </svg>
                            ç­›é€‰
                        </button>
                    </div>
                </section>

                <!-- å•†å“åˆ—è¡¨ -->
                <section class="px-4 py-4 grid grid-cols-2 gap-3">
                    <!-- å•†å“1 - å¤šå›¾è½®æ’­ -->
                    <a href="#" class="product-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="relative h-36 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1558089687-f282ffcbc0d4?ixlib=rb-4.0.3&auto=format&fit=crop&w=180&h=180&q=80" alt="æ™ºèƒ½ç½‘å…³ä¸»æœº" class="w-full h-full object-cover" loading="lazy">
                            <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                <div class="carousel-indicator active"></div>
                                <div class="carousel-indicator"></div>
                                <div class="carousel-indicator"></div>
                            </div>
                        </div>
                        <div class="p-2">
                            <h3 class="text-xs font-medium mb-1 line-clamp-2">æ™ºèƒ½ç½‘å…³ä¸»æœº</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-bold">Â¥299</span>
                                <span class="text-xxs text-gray-500">å·²å”®120+</span>
                            </div>
                        </div>
                    </a>

                    <!-- å•†å“2 - å¤šå›¾è½®æ’­ -->
                    <a href="#" class="product-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="relative h-36 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1546054454-aa26e2b734c7?ixlib=rb-4.0.3&auto=format&fit=crop&w=180&h=180&q=80" alt="æ™ºèƒ½é—¨é”" class="w-full h-full object-cover" loading="lazy">
                            <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                <div class="carousel-indicator active"></div>
                                <div class="carousel-indicator"></div>
                                <div class="carousel-indicator"></div>
                            </div>
                            <!-- è§†é¢‘æ ‡è¯† -->
                            <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-xs px-1.5 py-0.5 rounded">
                                <i class="fas fa-play mr-1"></i>è§†é¢‘
                            </div>
                        </div>
                        <div class="p-2">
                            <h3 class="text-xs font-medium mb-1 line-clamp-2">æ™ºèƒ½é—¨é” æŒ‡çº¹/å¯†ç /NFC</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-bold">Â¥1299</span>
                                <span class="text-xxs text-gray-500">å·²å”®85+</span>
                            </div>
                        </div>
                    </a>

                    <!-- å•†å“3 - å¤šå›¾è½®æ’­ -->
                    <a href="#" class="product-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="relative h-36 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1573770012830-7c314f4fcc99?ixlib=rb-4.0.3&auto=format&fit=crop&w=180&h=180&q=80" alt="æ™ºèƒ½æ‘„åƒå¤´" class="w-full h-full object-cover" loading="lazy">
                            <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                <div class="carousel-indicator active"></div>
                                <div class="carousel-indicator"></div>
                                <div class="carousel-indicator"></div>
                            </div>
                        </div>
                        <div class="p-2">
                            <h3 class="text-xs font-medium mb-1 line-clamp-2">æ™ºèƒ½æ‘„åƒå¤´ 360Â°æ—‹è½¬</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-bold">Â¥199</span>
                                <span class="text-xxs text-gray-500">å·²å”®230+</span>
                            </div>
                        </div>
                    </a>

                    <!-- å•†å“4 - å¤šå›¾è½®æ’­ -->
                    <a href="#" class="product-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="relative h-36 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1544256718-3bcf237f3974?ixlib=rb-4.0.3&auto=format&fit=crop&w=180&h=180&q=80" alt="æ™ºèƒ½ç¯å¸¦" class="w-full h-full object-cover" loading="lazy">
                            <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                <div class="carousel-indicator active"></div>
                                <div class="carousel-indicator"></div>
                                <div class="carousel-indicator"></div>
                            </div>
                        </div>
                        <div class="p-2">
                            <h3 class="text-xs font-medium mb-1 line-clamp-2">æ™ºèƒ½ç¯å¸¦ RGBå…¨å½©</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-bold">Â¥129</span>
                                <span class="text-xxs text-gray-500">å·²å”®156+</span>
                            </div>
                        </div>
                    </a>

                    <!-- å•†å“5 - å¤šå›¾è½®æ’­ -->
                    <a href="#" class="product-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="relative h-36 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1556656793-08538906a9f8?ixlib=rb-4.0.3&auto=format&fit=crop&w=180&h=180&q=80" alt="æ™ºèƒ½æ’åº§" class="w-full h-full object-cover" loading="lazy">
                            <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                <div class="carousel-indicator active"></div>
                                <div class="carousel-indicator"></div>
                            </div>
                        </div>
                        <div class="p-2">
                            <h3 class="text-xs font-medium mb-1 line-clamp-2">æ™ºèƒ½æ’åº§ è¿œç¨‹æ§åˆ¶</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-bold">Â¥59</span>
                                <span class="text-xxs text-gray-500">å·²å”®320+</span>
                            </div>
                        </div>
                    </a>

                    <!-- å•†å“6 - å¤šå›¾è½®æ’­ -->
                    <a href="#" class="product-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="relative h-36 overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1551651653-c5186a1fbba2?ixlib=rb-4.0.3&auto=format&fit=crop&w=180&h=180&q=80" alt="æ™ºèƒ½çª—å¸˜" class="w-full h-full object-cover" loading="lazy">
                            <!-- è½®æ’­æŒ‡ç¤ºå™¨ -->
                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1">
                                <div class="carousel-indicator active"></div>
                                <div class="carousel-indicator"></div>
                                <div class="carousel-indicator"></div>
                            </div>
                            <!-- è§†é¢‘æ ‡è¯† -->
                            <div class="absolute top-2 right-2 bg-black bg-opacity-60 text-white text-xs px-1.5 py-0.5 rounded">
                                <i class="fas fa-play mr-1"></i>æ¼”ç¤º
                            </div>
                        </div>
                        <div class="p-2">
                            <h3 class="text-xs font-medium mb-1 line-clamp-2">æ™ºèƒ½çª—å¸˜ç”µæœº é™éŸ³è®¾è®¡</h3>
                            <div class="flex justify-between items-center">
                                <span class="text-sm font-bold">Â¥399</span>
                                <span class="text-xxs text-gray-500">å·²å”®75+</span>
                            </div>
                        </div>
                    </a>
                </section>
            </div>



            <!-- åº•éƒ¨å¯¼èˆªæ  -->
<div class="absolute bottom-0 left-0 right-0 h-[84px] bg-white/80 backdrop-blur-xl border-t border-white/20">
<!-- å¯¼èˆªæ å†…å®¹ -->
<nav class="h-[49px] flex items-center px-2">
<div class="flex justify-around w-full text-[12px]">
<a class="flex flex-col items-center group text-gray-400 hover:text-gray-600 active:text-gray-800 transition-colors" href="home.html">
<div class="transform transition-transform group-hover:scale-110 group-active:scale-95">
<svg class="w-[22px] h-[22px] stroke-[1.5]" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
</div>
<span class="mt-1">é¦–é¡µ</span>
</a>
<a class="flex flex-col items-center group text-gray-400 hover:text-gray-600 active:text-gray-800 transition-colors" href="design-result.html">
<div class="transform transition-transform group-hover:scale-110 group-active:scale-95">
<svg class="w-[22px] h-[22px] stroke-[1.5]" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<circle cx="13.5" cy="6.5" fill="currentColor" r=".5"></circle>
<circle cx="17.5" cy="10.5" fill="currentColor" r=".5"></circle>
<circle cx="8.5" cy="7.5" fill="currentColor" r=".5"></circle>
<circle cx="6.5" cy="12.5" fill="currentColor" r=".5"></circle>
<path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"></path>
</svg>
</div>
<span class="mt-1">è®¾è®¡</span>
</a>
<a class="flex flex-col items-center group text-black transition-colors" href="mall.html" class="flex flex-col items-center group text-black transition-colors">
<div class="transform transition-transform group-hover:scale-110 group-active:scale-95">
<svg class="w-[22px] h-[22px] stroke-[1.5]" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
<path d="M3 6h18"></path>
<path d="M16 10a4 4 0 0 1-8 0"></path>
</svg>
</div>
<span class="mt-1">å•†åŸ</span>
</a>
<a class="flex flex-col items-center group text-gray-400 hover:text-gray-600 active:text-gray-800 transition-colors" href="spaces.html">
<div class="transform transition-transform group-hover:scale-110 group-active:scale-95">
<svg class="w-[22px] h-[22px] stroke-[1.5]" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9"></path>
<path d="m18 15 4-4"></path>
<path d="m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5"></path>
</svg>
</div>
<span class="mt-1">æ–½å·¥</span>
</a>
<a class="flex flex-col items-center group text-gray-400 hover:text-gray-600 active:text-gray-800 transition-colors" href="me.html">
<div class="transform transition-transform group-hover:scale-110 group-active:scale-95">
<svg class="w-[22px] h-[22px] stroke-[1.5]" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
<circle cx="12" cy="7" r="4"></circle>
</svg>
</div>
<span class="mt-1">æˆ‘çš„</span>
</a>
</div>
</nav>
<!-- iPhone 16 Home Indicator -->
<div class="h-[34px] flex items-center justify-center">
<div class="w-[134px] h-[5px] bg-black rounded-full"></div>
</div>
</div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥å°ç±³æœ‰å“Tabç»„ä»¶ -->
    <script src="js/youpin-tab-component.js"></script>
    <script>
        // æœç´¢å’Œç­›é€‰åŠŸèƒ½ç®¡ç†å™¨
        class MallSearchManager {
            constructor() {
                this.searchHistory = this.getSearchHistory();
                this.hotSearches = ['æ™ºèƒ½é—¨é”', 'æ™ºèƒ½æ‘„åƒå¤´', 'æ™ºèƒ½å¼€å…³', 'æ™ºèƒ½éŸ³ç®±', 'æ™ºèƒ½ç¯æ³¡', 'ä¼ æ„Ÿå™¨'];
                this.searchSuggestions = [
                    'æ™ºèƒ½é—¨é”', 'æ™ºèƒ½æ‘„åƒå¤´', 'æ™ºèƒ½å¼€å…³', 'æ™ºèƒ½éŸ³ç®±', 'æ™ºèƒ½ç¯æ³¡',
                    'æ™ºèƒ½æ’åº§', 'æ™ºèƒ½çª—å¸˜', 'ä¼ æ„Ÿå™¨', 'æ™ºèƒ½ç½‘å…³', 'æ™ºèƒ½é¢æ¿',
                    'å°ç±³æ™ºèƒ½', 'åä¸ºæ™ºèƒ½', 'Aqara', 'Yeelight', 'æŒ‡çº¹é”',
                    'äººè„¸è¯†åˆ«', 'è¯­éŸ³æ§åˆ¶', 'æ‰‹æœºæ§åˆ¶', 'å®šæ—¶å¼€å…³', 'åœºæ™¯æ¨¡å¼'
                ];
                this.currentFilters = {
                    price: null,
                    brands: [],
                    features: [],
                    rating: null,
                    customPrice: { min: null, max: null }
                };
                this.debounceTimer = null;
                this.init();
            }

            init() {
                this.initSearchInput();
                this.initHotSearchTags();
                this.initFilterModal();
                this.initCategoryNavigation();
                this.initSortButtons();
            }

            // åˆå§‹åŒ–æœç´¢è¾“å…¥æ¡†
            initSearchInput() {
                const searchInput = document.getElementById('mallSearchInput');
                const searchBtn = document.getElementById('mallSearchBtn');
                const suggestionsBox = document.getElementById('searchSuggestions');

                if (!searchInput || !searchBtn) return;

                // æœç´¢æŒ‰é’®ç‚¹å‡»
                searchBtn.addEventListener('click', () => {
                    this.performSearch(searchInput.value.trim());
                });

                // å›è½¦æœç´¢
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.performSearch(searchInput.value.trim());
                    }
                });

                // å®æ—¶æœç´¢å»ºè®®
                searchInput.addEventListener('input', (e) => {
                    clearTimeout(this.debounceTimer);
                    this.debounceTimer = setTimeout(() => {
                        this.showSearchSuggestions(e.target.value.trim());
                    }, 300);
                });

                // è·å¾—ç„¦ç‚¹æ—¶æ˜¾ç¤ºå»ºè®®
                searchInput.addEventListener('focus', () => {
                    if (searchInput.value.trim()) {
                        this.showSearchSuggestions(searchInput.value.trim());
                    } else {
                        this.showRecentSearches();
                    }
                });

                // å¤±å»ç„¦ç‚¹æ—¶éšè—å»ºè®®ï¼ˆå»¶è¿Ÿä»¥å…è®¸ç‚¹å‡»å»ºè®®ï¼‰
                searchInput.addEventListener('blur', () => {
                    setTimeout(() => {
                        suggestionsBox.classList.add('hidden');
                    }, 200);
                });
            }

            // æ˜¾ç¤ºæœç´¢å»ºè®®
            showSearchSuggestions(query) {
                const suggestionsBox = document.getElementById('searchSuggestions');
                const suggestionsList = document.getElementById('suggestionsList');

                if (!query) {
                    suggestionsBox.classList.add('hidden');
                    return;
                }

                // è¿‡æ»¤åŒ¹é…çš„å»ºè®®
                const matches = this.searchSuggestions.filter(item =>
                    item.toLowerCase().includes(query.toLowerCase())
                ).slice(0, 5);

                if (matches.length === 0) {
                    suggestionsBox.classList.add('hidden');
                    return;
                }

                // ç”Ÿæˆå»ºè®®åˆ—è¡¨
                suggestionsList.innerHTML = matches.map(item => `
                    <div class="suggestion-item px-3 py-2 hover:bg-gray-50 cursor-pointer text-sm rounded" data-suggestion="${item}">
                        <i class="fas fa-search text-gray-400 mr-2"></i>
                        ${this.highlightMatch(item, query)}
                    </div>
                `).join('');

                // æ·»åŠ å»ºè®®ç‚¹å‡»äº‹ä»¶
                suggestionsList.querySelectorAll('.suggestion-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const suggestion = item.dataset.suggestion;
                        document.getElementById('mallSearchInput').value = suggestion;
                        this.performSearch(suggestion);
                    });
                });

                suggestionsBox.classList.remove('hidden');
            }

            // æ˜¾ç¤ºæœ€è¿‘æœç´¢
            showRecentSearches() {
                const suggestionsBox = document.getElementById('searchSuggestions');
                const suggestionsList = document.getElementById('suggestionsList');

                if (this.searchHistory.length === 0) {
                    suggestionsBox.classList.add('hidden');
                    return;
                }

                suggestionsList.innerHTML = this.searchHistory.slice(0, 5).map(item => `
                    <div class="suggestion-item px-3 py-2 hover:bg-gray-50 cursor-pointer text-sm rounded flex items-center justify-between" data-suggestion="${item}">
                        <span><i class="fas fa-history text-gray-400 mr-2"></i>${item}</span>
                        <button class="remove-history text-gray-400 hover:text-red-500" data-item="${item}">
                            <i class="fas fa-times text-xs"></i>
                        </button>
                    </div>
                `).join('');

                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                suggestionsList.querySelectorAll('.suggestion-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        if (!e.target.closest('.remove-history')) {
                            const suggestion = item.dataset.suggestion;
                            document.getElementById('mallSearchInput').value = suggestion;
                            this.performSearch(suggestion);
                        }
                    });
                });

                // æ·»åŠ åˆ é™¤å†å²è®°å½•äº‹ä»¶
                suggestionsList.querySelectorAll('.remove-history').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.removeSearchHistory(btn.dataset.item);
                        this.showRecentSearches();
                    });
                });

                suggestionsBox.classList.remove('hidden');
            }

            // é«˜äº®åŒ¹é…æ–‡æœ¬
            highlightMatch(text, query) {
                const regex = new RegExp(`(${query})`, 'gi');
                return text.replace(regex, '<strong>$1</strong>');
            }

            // æ‰§è¡Œæœç´¢
            performSearch(query) {
                if (!query) return;

                // ä¿å­˜æœç´¢å†å²
                this.saveSearchHistory(query);

                // è·³è½¬åˆ°æœç´¢é¡µé¢
                window.location.href = `mall-search.html?q=${encodeURIComponent(query)}`;
            }

            // åˆå§‹åŒ–çƒ­é—¨æœç´¢æ ‡ç­¾
            initHotSearchTags() {
                const hotSearchTags = document.querySelectorAll('.hot-search-tag');
                hotSearchTags.forEach(tag => {
                    tag.addEventListener('click', () => {
                        const keyword = tag.dataset.keyword;
                        document.getElementById('mallSearchInput').value = keyword;
                        this.performSearch(keyword);
                    });
                });
            }

            // æœç´¢å†å²ç®¡ç†
            getSearchHistory() {
                return JSON.parse(localStorage.getItem('mallSearchHistory') || '[]');
            }

            saveSearchHistory(query) {
                let history = this.getSearchHistory();
                // ç§»é™¤é‡å¤é¡¹
                history = history.filter(item => item !== query);
                // æ·»åŠ åˆ°å¼€å¤´
                history.unshift(query);
                // é™åˆ¶å†å²è®°å½•æ•°é‡
                history = history.slice(0, 10);
                localStorage.setItem('mallSearchHistory', JSON.stringify(history));
                this.searchHistory = history;
            }

            removeSearchHistory(query) {
                let history = this.getSearchHistory();
                history = history.filter(item => item !== query);
                localStorage.setItem('mallSearchHistory', JSON.stringify(history));
                this.searchHistory = history;
            }

            // åˆå§‹åŒ–ç­›é€‰å¼¹çª—
            initFilterModal() {
                const filterBtn = document.getElementById('filterBtn');
                const filterModal = document.getElementById('filterModal');
                const closeFilter = document.getElementById('closeFilter');
                const resetFilters = document.getElementById('resetFilters');
                const clearFilters = document.getElementById('clearFilters');
                const applyFilters = document.getElementById('applyFilters');

                // æ‰“å¼€ç­›é€‰å¼¹çª—
                filterBtn?.addEventListener('click', () => {
                    filterModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                });

                // å…³é—­ç­›é€‰å¼¹çª—
                const closeModal = () => {
                    filterModal.classList.add('hidden');
                    document.body.style.overflow = '';
                };

                closeFilter?.addEventListener('click', closeModal);
                filterModal?.addEventListener('click', (e) => {
                    if (e.target === filterModal) closeModal();
                });

                // é‡ç½®ç­›é€‰
                resetFilters?.addEventListener('click', () => {
                    this.resetAllFilters();
                });

                // æ¸…ç©ºç­›é€‰
                clearFilters?.addEventListener('click', () => {
                    this.resetAllFilters();
                });

                // åº”ç”¨ç­›é€‰
                applyFilters?.addEventListener('click', () => {
                    this.applyCurrentFilters();
                    closeModal();
                });

                this.initFilterControls();
            }

            // åˆå§‹åŒ–ç­›é€‰æ§ä»¶
            initFilterControls() {
                // ä»·æ ¼ç­›é€‰
                document.querySelectorAll('.price-filter').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.price-filter').forEach(b => b.classList.remove('bg-black', 'text-white'));
                        btn.classList.add('bg-black', 'text-white');
                        this.currentFilters.price = btn.dataset.price;

                        // æ˜¾ç¤º/éšè—è‡ªå®šä¹‰ä»·æ ¼è¾“å…¥
                        const customPriceRange = document.getElementById('customPriceRange');
                        if (btn.dataset.price === 'custom') {
                            customPriceRange.classList.remove('hidden');
                        } else {
                            customPriceRange.classList.add('hidden');
                        }
                    });
                });

                // å“ç‰Œç­›é€‰
                document.querySelectorAll('.brand-filter').forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const brand = checkbox.dataset.brand;
                        if (checkbox.checked) {
                            if (!this.currentFilters.brands.includes(brand)) {
                                this.currentFilters.brands.push(brand);
                            }
                        } else {
                            this.currentFilters.brands = this.currentFilters.brands.filter(b => b !== brand);
                        }
                    });
                });

                // åŠŸèƒ½ç‰¹æ€§ç­›é€‰
                document.querySelectorAll('.feature-filter').forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const feature = checkbox.dataset.feature;
                        if (checkbox.checked) {
                            if (!this.currentFilters.features.includes(feature)) {
                                this.currentFilters.features.push(feature);
                            }
                        } else {
                            this.currentFilters.features = this.currentFilters.features.filter(f => f !== feature);
                        }
                    });
                });

                // è¯„åˆ†ç­›é€‰
                document.querySelectorAll('.rating-filter').forEach(radio => {
                    radio.addEventListener('change', () => {
                        if (radio.checked) {
                            this.currentFilters.rating = radio.dataset.rating;
                        }
                    });
                });

                // è‡ªå®šä¹‰ä»·æ ¼è¾“å…¥
                const minPrice = document.getElementById('minPrice');
                const maxPrice = document.getElementById('maxPrice');

                minPrice?.addEventListener('input', () => {
                    this.currentFilters.customPrice.min = minPrice.value;
                });

                maxPrice?.addEventListener('input', () => {
                    this.currentFilters.customPrice.max = maxPrice.value;
                });
            }

            // é‡ç½®æ‰€æœ‰ç­›é€‰
            resetAllFilters() {
                // é‡ç½®æ•°æ®
                this.currentFilters = {
                    price: null,
                    brands: [],
                    features: [],
                    rating: null,
                    customPrice: { min: null, max: null }
                };

                // é‡ç½®UI
                document.querySelectorAll('.price-filter').forEach(btn => {
                    btn.classList.remove('bg-black', 'text-white');
                });
                document.querySelectorAll('.brand-filter, .feature-filter').forEach(checkbox => {
                    checkbox.checked = false;
                });
                document.querySelectorAll('.rating-filter').forEach(radio => {
                    radio.checked = false;
                });
                document.getElementById('minPrice').value = '';
                document.getElementById('maxPrice').value = '';
                document.getElementById('customPriceRange').classList.add('hidden');

                this.updateFilterCount();
            }

            // åº”ç”¨å½“å‰ç­›é€‰
            applyCurrentFilters() {
                // è®¡ç®—ç­›é€‰æ¡ä»¶æ•°é‡
                this.updateFilterCount();

                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„ç­›é€‰é€»è¾‘
                console.log('åº”ç”¨ç­›é€‰æ¡ä»¶:', this.currentFilters);

                // æ¨¡æ‹Ÿç­›é€‰ç»“æœ
                alert('ç­›é€‰å·²åº”ç”¨ï¼\n' + JSON.stringify(this.currentFilters, null, 2));
            }

            // æ›´æ–°ç­›é€‰è®¡æ•°
            updateFilterCount() {
                let count = 0;
                if (this.currentFilters.price) count++;
                count += this.currentFilters.brands.length;
                count += this.currentFilters.features.length;
                if (this.currentFilters.rating) count++;
                if (this.currentFilters.customPrice.min || this.currentFilters.customPrice.max) count++;

                const filterCount = document.getElementById('filterCount');
                if (count > 0) {
                    filterCount.textContent = count;
                    filterCount.classList.remove('hidden');
                } else {
                    filterCount.classList.add('hidden');
                }
            }

            // åˆå§‹åŒ–åˆ†ç±»å¯¼èˆª - å°ç±³æœ‰å“é£æ ¼
            initCategoryNavigation() {
                const categoryItems = document.querySelectorAll('.youpin-tab');
                const scrollContainer = document.getElementById('categoryScrollable');

                // ç»‘å®šåˆ†ç±»ç‚¹å‡»äº‹ä»¶
                categoryItems.forEach(item => {
                    item.addEventListener('click', function() {
                        const category = this.dataset.category;
                        const categoryName = this.textContent.trim();

                        // æ›´æ–°æ¿€æ´»çŠ¶æ€
                        categoryItems.forEach(cat => cat.classList.remove('active'));
                        this.classList.add('active');

                        // æ»šåŠ¨åˆ°å½“å‰åˆ†ç±»
                        scrollToActiveCategory(this);

                        if (category === 'all') {
                            // æ˜¾ç¤ºå…¨éƒ¨å•†å“
                            console.log('æ˜¾ç¤ºå…¨éƒ¨å•†å“');
                            return;
                        }

                        // è·³è½¬åˆ°åˆ†ç±»é¡µé¢
                        const categoryUrl = `mall-category.html?category=${encodeURIComponent(category)}&name=${encodeURIComponent(categoryName)}`;
                        window.location.href = categoryUrl;
                    });
                });

                // ç»‘å®šæ»šåŠ¨äº‹ä»¶ç›‘å¬
                if (scrollContainer) {
                    scrollContainer.addEventListener('scroll', () => {
                        updateCategoryScrollIndicators();
                    });

                    // åˆå§‹åŒ–æ»šåŠ¨æŒ‡ç¤ºå™¨
                    setTimeout(() => {
                        updateCategoryScrollIndicators();
                    }, 100);
                }
            }

            // æ»šåŠ¨ç›¸å…³å‡½æ•°å·²ç§»è‡³å…¨å±€ä½œç”¨åŸŸ

            // åˆå§‹åŒ–æ’åºæŒ‰é’®
            initSortButtons() {
                const sortButtons = document.querySelectorAll('.sort-btn');

                sortButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        sortButtons.forEach(sort => sort.classList.remove('active'));
                        this.classList.add('active');

                        const sortType = this.dataset.sort;
                        console.log('åˆ‡æ¢æ’åº:', sortType);
                        // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ’åºé€»è¾‘
                    });
                });
            }
        }





        // æ—§çš„Tabæ»šåŠ¨ä»£ç å·²ç§»é™¤ï¼Œç°åœ¨ä½¿ç”¨YoupinTabComponentç»„ä»¶

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            new MallSearchManager();
            initializeProductCarousels();

            // åˆå§‹åŒ–å°ç±³æœ‰å“é£æ ¼Tabç»„ä»¶
            console.log('ğŸš€ åˆå§‹åŒ–å°ç±³æœ‰å“é£æ ¼Tabç»„ä»¶...');
            const mallTabs = new YoupinTabComponent('#mall-category-tabs', {
                enableKeyboard: true,
                enableAutoScroll: true,
                debug: true
            });

            // ç›‘å¬Tabåˆ‡æ¢äº‹ä»¶
            document.getElementById('mall-category-tabs').addEventListener('youpinTabChange', (e) => {
                const category = e.detail.data.category;
                const categoryName = e.detail.tab.textContent.trim();

                console.log('ğŸ¯ å•†åŸåˆ†ç±»åˆ‡æ¢:', {
                    category,
                    categoryName,
                    index: e.detail.index
                });

                // è¿™é‡Œå¯ä»¥æ·»åŠ åˆ†ç±»åˆ‡æ¢çš„ä¸šåŠ¡é€»è¾‘
                // ä¾‹å¦‚ï¼šåŠ è½½å¯¹åº”åˆ†ç±»çš„å•†å“æ•°æ®
                if (category !== 'all') {
                    // è·³è½¬åˆ°åˆ†ç±»é¡µé¢æˆ–åŠ è½½åˆ†ç±»æ•°æ®
                    // window.location.href = `mall-category.html?category=${encodeURIComponent(category)}&name=${encodeURIComponent(categoryName)}`;
                }
            });

            console.log('âœ… å°ç±³æœ‰å“é£æ ¼Tabç»„ä»¶åˆå§‹åŒ–å®Œæˆ');

            // è®¾ç½®è®¢å•æ¥æºä¸ºå•†åŸ
            localStorage.setItem('orderSource', 'mall');
            console.log('å•†åŸé¡µé¢ï¼šè®¢å•æ¥æºå·²è®¾ç½®ä¸º mall');
        });

        // ç¡®ä¿DOMåŠ è½½å®Œæˆååˆå§‹åŒ–æ»šåŠ¨ä½ç½®
        window.addEventListener('load', function() {
            console.log('ğŸ¯ é¡µé¢å®Œå…¨åŠ è½½ï¼Œåˆå§‹åŒ–æ»šåŠ¨ä½ç½®...');
            initScrollPosition();
        });

        // äº§å“è½®æ’­åŠŸèƒ½
        function initializeProductCarousels() {
            const productCards = document.querySelectorAll('.product-card');

            productCards.forEach(card => {
                const carousel = card.querySelector('.product-carousel');
                if (!carousel) return;

                const track = carousel.querySelector('.carousel-track');
                const indicators = carousel.querySelectorAll('.carousel-indicators > div');
                const images = track.querySelectorAll('img');

                if (images.length <= 1) return; // åªæœ‰ä¸€å¼ å›¾ç‰‡æ—¶ä¸éœ€è¦è½®æ’­

                let currentIndex = 0;
                let autoPlayTimer = null;
                let isHovering = false;

                // æ›´æ–°è½®æ’­ä½ç½®
                function updateCarousel() {
                    const translateX = -currentIndex * 100;
                    track.style.transform = `translateX(${translateX}%)`;

                    // æ›´æ–°æŒ‡ç¤ºå™¨
                    indicators.forEach((indicator, index) => {
                        if (index === currentIndex) {
                            indicator.classList.remove('bg-opacity-40');
                            indicator.classList.add('bg-opacity-80');
                        } else {
                            indicator.classList.remove('bg-opacity-80');
                            indicator.classList.add('bg-opacity-40');
                        }
                    });
                }

                // ä¸‹ä¸€å¼ å›¾ç‰‡
                function nextImage() {
                    currentIndex = (currentIndex + 1) % images.length;
                    updateCarousel();
                }

                // ä¸Šä¸€å¼ å›¾ç‰‡
                function prevImage() {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    updateCarousel();
                }

                // è·³è½¬åˆ°æŒ‡å®šå›¾ç‰‡
                function goToImage(index) {
                    currentIndex = index;
                    updateCarousel();
                }

                // å¼€å§‹è‡ªåŠ¨æ’­æ”¾
                function startAutoPlay() {
                    if (autoPlayTimer) clearInterval(autoPlayTimer);
                    autoPlayTimer = setInterval(() => {
                        if (!isHovering) {
                            nextImage();
                        }
                    }, 3000); // 3ç§’åˆ‡æ¢ä¸€æ¬¡
                }

                // åœæ­¢è‡ªåŠ¨æ’­æ”¾
                function stopAutoPlay() {
                    if (autoPlayTimer) {
                        clearInterval(autoPlayTimer);
                        autoPlayTimer = null;
                    }
                }

                // é¼ æ ‡æ‚¬åœäº‹ä»¶
                card.addEventListener('mouseenter', () => {
                    isHovering = true;
                    startAutoPlay(); // æ‚¬åœæ—¶å¼€å§‹è‡ªåŠ¨æ’­æ”¾
                });

                card.addEventListener('mouseleave', () => {
                    isHovering = false;
                    stopAutoPlay(); // ç¦»å¼€æ—¶åœæ­¢è‡ªåŠ¨æ’­æ”¾
                });

                // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
                let startX = 0;
                let startY = 0;
                let isDragging = false;

                carousel.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    isDragging = true;
                    stopAutoPlay();
                }, { passive: true });

                carousel.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;

                    const currentX = e.touches[0].clientX;
                    const currentY = e.touches[0].clientY;
                    const diffX = startX - currentX;
                    const diffY = startY - currentY;

                    // å¦‚æœå‚ç›´æ»‘åŠ¨è·ç¦»å¤§äºæ°´å¹³æ»‘åŠ¨ï¼Œä¸å¤„ç†è½®æ’­
                    if (Math.abs(diffY) > Math.abs(diffX)) {
                        isDragging = false;
                        return;
                    }

                    // é˜»æ­¢é»˜è®¤æ»šåŠ¨è¡Œä¸º
                    e.preventDefault();
                }, { passive: false });

                carousel.addEventListener('touchend', (e) => {
                    if (!isDragging) return;

                    const endX = e.changedTouches[0].clientX;
                    const diffX = startX - endX;

                    // æ»‘åŠ¨è·ç¦»è¶…è¿‡30pxæ‰åˆ‡æ¢
                    if (Math.abs(diffX) > 30) {
                        if (diffX > 0) {
                            nextImage(); // å‘å·¦æ»‘åŠ¨ï¼Œæ˜¾ç¤ºä¸‹ä¸€å¼ 
                        } else {
                            prevImage(); // å‘å³æ»‘åŠ¨ï¼Œæ˜¾ç¤ºä¸Šä¸€å¼ 
                        }
                    }

                    isDragging = false;
                }, { passive: true });

                // æŒ‡ç¤ºå™¨ç‚¹å‡»äº‹ä»¶
                indicators.forEach((indicator, index) => {
                    indicator.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        goToImage(index);
                    });
                });

                // é˜»æ­¢è½®æ’­åŒºåŸŸçš„é“¾æ¥è·³è½¬ï¼ˆå½“ç”¨æˆ·åœ¨æ»‘åŠ¨æ—¶ï¼‰
                carousel.addEventListener('click', (e) => {
                    if (isDragging) {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                });
            });
        }
    </script>

    <!-- å¼•å…¥H5ä¸å°ç¨‹åºé€šä¿¡æ¡¥æ¥å·¥å…· -->
    <script src="../utils/h5-bridge.js"></script>
    
    <script>
        // å°ç¨‹åºç¯å¢ƒåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥å°ç¨‹åºç¯å¢ƒå¹¶åˆå§‹åŒ–é€šä¿¡
            if (window.H5Bridge) {
                console.log('H5Bridgeå·²åŠ è½½ï¼Œå½“å‰ç¯å¢ƒ:', window.H5Bridge.isInMiniProgram ? 'å°ç¨‹åº' : 'æµè§ˆå™¨');
                
                if (window.H5Bridge.isInMiniProgram) {
                    initMiniProgramFeatures();
                }
            }
        });

        // åˆå§‹åŒ–å°ç¨‹åºç‰¹æœ‰åŠŸèƒ½
        function initMiniProgramFeatures() {
            console.log('åˆå§‹åŒ–å°ç¨‹åºç‰¹æœ‰åŠŸèƒ½');
            
            // æ›¿æ¢æ‰€æœ‰é¡µé¢è·³è½¬ä¸ºå°ç¨‹åºå¯¼èˆª
            replacePageNavigation();
            
            // æ›¿æ¢alertä¸ºå°ç¨‹åºtoast
            replaceAlertWithToast();
            
            // ç›‘å¬æ”¯ä»˜ç»“æœï¼ˆå¦‚æœé¡µé¢æœ‰æ”¯ä»˜åŠŸèƒ½ï¼‰
            if (typeof handlePaymentSuccess === 'function') {
                window.H5Bridge.on('paymentSuccess', handlePaymentSuccess);
                window.H5Bridge.on('paymentFail', handlePaymentFailure || function(error) {
                    window.H5Bridge.showToast('æ”¯ä»˜å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                });
            }
            
            // ç›‘å¬ç”¨æˆ·ä¿¡æ¯è·å–ç»“æœï¼ˆå¦‚æœé¡µé¢éœ€è¦ç”¨æˆ·ä¿¡æ¯ï¼‰
            if (typeof handleUserInfoSuccess === 'function') {
                window.H5Bridge.on('userInfoSuccess', handleUserInfoSuccess);
                window.H5Bridge.on('userInfoFail', handleUserInfoFailure || function(error) {
                    window.H5Bridge.showToast('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥', 'error');
                });
            }
        }

        // æ›¿æ¢é¡µé¢è·³è½¬ä¸ºå°ç¨‹åºå¯¼èˆª
        function replacePageNavigation() {
            // å¤„ç†æ‰€æœ‰HTMLé¡µé¢é“¾æ¥
            document.querySelectorAll('a[href$=".html"]').forEach(link => {
                const originalHref = link.getAttribute('href');
                
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // è§£æç›®æ ‡é¡µé¢
                    const pageName = originalHref.replace('.html', '').replace(/^.*//, '');
                    
                    // ç‰¹æ®Šé¡µé¢æ˜ å°„åˆ°å°ç¨‹åºåŸç”Ÿé¡µé¢
                    const nativePageMap = {
                        'home': '/pages/home/index',
                        'design-result': '/pages/design/index',
                        'mall': '/pages/mall/index',
                        'spaces': '/pages/construction/index',
                        'me': '/pages/profile/index'
                    };
                    
                    if (nativePageMap[pageName]) {
                        // è·³è½¬åˆ°å°ç¨‹åºåŸç”Ÿé¡µé¢
                        window.H5Bridge.navigateTo(nativePageMap[pageName]);
                    } else {
                        // è·³è½¬åˆ°web-viewé¡µé¢
                        window.H5Bridge.navigateTo(`/pages/webview/index?page=${pageName}`);
                    }
                });
            });
            
            // å¤„ç†è¿”å›æŒ‰é’®
            document.querySelectorAll('[onclick*="history.back"], [onclick*="window.history.back"]').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.H5Bridge.navigateBack();
                });
            });
        }

        // æ›¿æ¢alertä¸ºå°ç¨‹åºtoast
        function replaceAlertWithToast() {
            // é‡å†™å…¨å±€alertå‡½æ•°
            if (window.H5Bridge && window.H5Bridge.isInMiniProgram) {
                window.alert = function(message) {
                    window.H5Bridge.showToast(message);
                };
                
                window.confirm = function(message) {
                    // å°ç¨‹åºä¸­çš„confirméœ€è¦ç‰¹æ®Šå¤„ç†
                    window.H5Bridge.showToast(message);
                    return true; // ç®€åŒ–å¤„ç†ï¼Œå®é™…é¡¹ç›®ä¸­å¯èƒ½éœ€è¦æ›´å¤æ‚çš„é€»è¾‘
                };
            }
        }

        // é€šç”¨åˆ†äº«åŠŸèƒ½
        function shareToWechat(shareData) {
            if (window.H5Bridge && window.H5Bridge.isInMiniProgram) {
                // åœ¨å°ç¨‹åºä¸­ä½¿ç”¨åŸç”Ÿåˆ†äº«
                window.H5Bridge.share(shareData || {
                    title: document.title,
                    desc: 'æ™ºèƒ½å®¶å±…è®¾è®¡ä¸æ–½å·¥æœåŠ¡',
                    path: `/pages/webview/index?page=${getCurrentPageName()}`
                });
            } else {
                // åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨Web Share APIæˆ–é™çº§å¤„ç†
                if (navigator.share) {
                    navigator.share({
                        title: document.title,
                        text: 'æ™ºèƒ½å®¶å±…è®¾è®¡ä¸æ–½å·¥æœåŠ¡',
                        url: window.location.href
                    });
                } else {
                    alert('åˆ†äº«åŠŸèƒ½éœ€è¦åœ¨æ”¯æŒçš„æµè§ˆå™¨ä¸­ä½¿ç”¨');
                }
            }
        }

        // è·å–å½“å‰é¡µé¢åç§°
        function getCurrentPageName() {
            const pathname = window.location.pathname;
            return pathname.substring(pathname.lastIndexOf('/') + 1).replace('.html', '');
        }

        // é€šç”¨é”™è¯¯å¤„ç†
        function handleError(error, context = '') {
            console.error(`é”™è¯¯[${context}]:`, error);

            if (window.H5Bridge && window.H5Bridge.isInMiniProgram) {
                window.H5Bridge.showToast('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            } else {
                alert('æ“ä½œå¤±è´¥ï¼š' + (error.message || 'æœªçŸ¥é”™è¯¯'));
            }
        }

        // å…¨å±€å‡½æ•°ï¼šæ»šåŠ¨åˆ°æ¿€æ´»çš„åˆ†ç±»
        function scrollToActiveCategory(activeTab) {
            const scrollContainer = document.getElementById('categoryScrollable');
            if (!scrollContainer || !activeTab) return;

            const containerRect = scrollContainer.getBoundingClientRect();
            const tabRect = activeTab.getBoundingClientRect();

            const scrollLeft = scrollContainer.scrollLeft;
            const tabLeft = tabRect.left - containerRect.left + scrollLeft;
            const tabWidth = tabRect.width;
            const containerWidth = containerRect.width;

            // è®¡ç®—ç›®æ ‡æ»šåŠ¨ä½ç½®ï¼Œè®©tabå±…ä¸­æ˜¾ç¤º
            const targetScrollLeft = tabLeft - (containerWidth - tabWidth) / 2;

            scrollContainer.scrollTo({
                left: Math.max(0, targetScrollLeft),
                behavior: 'smooth'
            });
        }



        // å…¨å±€å‡½æ•°ï¼šæ›´æ–°åˆ†ç±»æ»šåŠ¨æŒ‡ç¤ºå™¨ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
        function updateCategoryScrollIndicators() {
            const scrollContainer = document.getElementById('categoryScrollable');
            const leftIndicator = document.getElementById('categoryLeftIndicator');
            const rightIndicator = document.getElementById('categoryRightIndicator');

            if (!scrollContainer || !leftIndicator || !rightIndicator) return;

            const scrollLeft = scrollContainer.scrollLeft;
            const maxScrollLeft = scrollContainer.scrollWidth - scrollContainer.clientWidth;

            // æ˜¾ç¤º/éšè—å·¦ä¾§æŒ‡ç¤ºå™¨
            if (scrollLeft > 10) {
                leftIndicator.classList.add('show');
            } else {
                leftIndicator.classList.remove('show');
            }

            // æ˜¾ç¤º/éšè—å³ä¾§æŒ‡ç¤ºå™¨
            if (scrollLeft < maxScrollLeft - 10) {
                rightIndicator.classList.add('show');
            } else {
                rightIndicator.classList.remove('show');
            }
        }
    </script>
</body>
</html>
