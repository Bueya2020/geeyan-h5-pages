<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mall.htmlæ»šåŠ¨è¯Šæ–­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* å¤åˆ¶mall.htmlä¸­çš„å…³é”®æ ·å¼ */
        .youpin-tab-container {
            position: relative;
            overflow: hidden;
        }
        
        .youpin-tab-scrollable {
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            width: 100%;
            border: 2px solid red; /* è°ƒè¯•è¾¹æ¡† */
        }
        
        .youpin-tab-scrollable::-webkit-scrollbar {
            display: none;
        }
        
        .youpin-tab-wrapper {
            display: flex;
            width: max-content;
            min-width: 100%;
            padding: 0 16px;
            border: 2px solid blue; /* è°ƒè¯•è¾¹æ¡† */
        }
        
        .youpin-tab-indicator-left,
        .youpin-tab-indicator-right {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 32px;
            pointer-events: none;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .show {
            opacity: 1 !important;
        }

        .youpin-tab {
            flex-shrink: 0;
            padding: 12px 16px;
            font-size: 14px;
            color: #666666;
            background: #f0f0f0; /* è°ƒè¯•èƒŒæ™¯ */
            border: 1px solid #ccc; /* è°ƒè¯•è¾¹æ¡† */
            border-bottom: 2px solid transparent;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-right: 4px; /* è°ƒè¯•é—´è· */
        }
        
        .youpin-tab:hover {
            color: #000000;
            background: #e0e0e0;
        }
        
        .youpin-tab.active {
            color: #000000;
            border-bottom-color: #000000;
            font-weight: 600;
            background: #d0d0d0;
        }
    </style>
</head>
<body class="p-4">
    <h1 class="text-2xl font-bold mb-4">Mall.htmlæ»šåŠ¨è¯Šæ–­é¡µé¢</h1>
    
    <!-- è¯Šæ–­ä¿¡æ¯æ˜¾ç¤º -->
    <div class="mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded">
        <h2 class="font-semibold mb-2">è¯Šæ–­ä¿¡æ¯ï¼š</h2>
        <div id="diagnostic-info" class="text-sm font-mono"></div>
    </div>
    
    <!-- å¤åˆ¶mall.htmlçš„åˆ†ç±»å¯¼èˆªç»“æ„ -->
    <section class="bg-white border border-gray-200 rounded">
        <div class="youpin-tab-container relative">
            <!-- å·¦ä¾§æ»šåŠ¨æŒ‡ç¤ºå™¨ -->
            <div id="categoryLeftIndicator" class="youpin-tab-indicator-left absolute top-0 bottom-0 left-0 bg-gradient-to-r from-white to-transparent"></div>
            <!-- å³ä¾§æ»šåŠ¨æŒ‡ç¤ºå™¨ -->
            <div id="categoryRightIndicator" class="youpin-tab-indicator-right absolute top-0 bottom-0 right-0 bg-gradient-to-l from-white to-transparent"></div>

            <div id="categoryScrollable" class="youpin-tab-scrollable">
                <div class="youpin-tab-wrapper">
                    <button class="youpin-tab active" data-category="all">å…¨éƒ¨</button>
                    <button class="youpin-tab" data-category="gateway">ç½‘å…³</button>
                    <button class="youpin-tab" data-category="switch">å¼€å…³</button>
                    <button class="youpin-tab" data-category="lighting">ç¯å…·</button>
                    <button class="youpin-tab" data-category="curtain">çª—å¸˜</button>
                    <button class="youpin-tab" data-category="sensor">ä¼ æ„Ÿå™¨</button>
                    <button class="youpin-tab" data-category="security">å®‰é˜²ç›‘æ§</button>
                    <button class="youpin-tab" data-category="appliance">å®¶ç”µæ§åˆ¶</button>
                    <button class="youpin-tab" data-category="audio">éŸ³å“è®¾å¤‡</button>
                    <button class="youpin-tab" data-category="climate">ç¯å¢ƒæ§åˆ¶</button>
                    <button class="youpin-tab" data-category="kitchen">å¨æˆ¿ç”µå™¨</button>
                    <button class="youpin-tab" data-category="bathroom">å«æµ´è®¾å¤‡</button>
                    <button class="youpin-tab" data-category="bedroom">å§å®¤ç”¨å“</button>
                    <button class="youpin-tab" data-category="living">å®¢å…è®¾å¤‡</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- å®æ—¶çŠ¶æ€ -->
    <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded">
        <h2 class="font-semibold mb-2">å®æ—¶çŠ¶æ€ï¼š</h2>
        <div id="real-time-status" class="text-sm font-mono"></div>
    </div>
    
    <!-- æ‰‹åŠ¨æµ‹è¯•æŒ‰é’® -->
    <div class="mt-6 space-x-4">
        <button id="force-scroll" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
            å¼ºåˆ¶æ»šåŠ¨åˆ°å³ä¾§
        </button>
        <button id="reset-scroll" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">
            é‡ç½®æ»šåŠ¨ä½ç½®
        </button>
        <button id="toggle-width" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
            åˆ‡æ¢å®¹å™¨å®½åº¦
        </button>
    </div>

    <script>
        // å¤åˆ¶mall.htmlçš„JavaScripté€»è¾‘
        function initCategoryScrolling() {
            console.log('ğŸ”§ è¯Šæ–­é¡µé¢ï¼šåˆå§‹åŒ–åˆ†ç±»å¯¼èˆªæ»šåŠ¨åŠŸèƒ½...');
            
            const tabsContainer = document.querySelector('.youpin-tab-container');
            const scrollable = document.getElementById('categoryScrollable');
            const leftIndicator = document.getElementById('categoryLeftIndicator');
            const rightIndicator = document.getElementById('categoryRightIndicator');
            
            const diagnosticInfo = document.getElementById('diagnostic-info');
            const realTimeStatus = document.getElementById('real-time-status');
            
            console.log('ğŸ“ DOMå…ƒç´ æ£€æŸ¥:', {
                tabsContainer: !!tabsContainer,
                scrollable: !!scrollable,
                leftIndicator: !!leftIndicator,
                rightIndicator: !!rightIndicator
            });
            
            if (!scrollable) {
                diagnosticInfo.innerHTML = 'âŒ é”™è¯¯ï¼šæœªæ‰¾åˆ°categoryScrollableå…ƒç´ ';
                return;
            }
            
            // æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬
            scrollable.addEventListener('scroll', function() {
                updateTabIndicators();
                updateRealTimeStatus();
            });
            
            // çª—å£å¤§å°å˜åŒ–æ—¶ä¹Ÿæ›´æ–°æŒ‡ç¤ºå™¨
            window.addEventListener('resize', updateTabIndicators);
            
            // åˆå§‹è¯Šæ–­
            setTimeout(() => {
                updateTabIndicators();
                updateDiagnosticInfo();
                updateRealTimeStatus();
            }, 100);
            
            // æ·»åŠ tabç‚¹å‡»äº‹ä»¶
            const tabs = document.querySelectorAll('.youpin-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    console.log('ğŸ¯ åˆ‡æ¢åˆ°åˆ†ç±»:', this.dataset.category);
                });
            });
            
            function updateTabIndicators() {
                if (!leftIndicator || !rightIndicator) return;
                
                const scrollPos = scrollable.scrollLeft;
                const maxScroll = scrollable.scrollWidth - scrollable.clientWidth;
                
                // å·¦ä¾§æŒ‡ç¤ºå™¨
                if (scrollPos > 0) {
                    leftIndicator.classList.add('show');
                } else {
                    leftIndicator.classList.remove('show');
                }
                
                // å³ä¾§æŒ‡ç¤ºå™¨
                if (scrollPos < maxScroll - 1) {
                    rightIndicator.classList.add('show');
                } else {
                    rightIndicator.classList.remove('show');
                }
            }
            
            function updateDiagnosticInfo() {
                const wrapper = scrollable.querySelector('.youpin-tab-wrapper');
                const tabs = scrollable.querySelectorAll('.youpin-tab');
                
                diagnosticInfo.innerHTML = `
                    å®¹å™¨å®½åº¦: ${scrollable.clientWidth}px<br>
                    å†…å®¹å®½åº¦: ${scrollable.scrollWidth}px<br>
                    åŒ…è£…å™¨å®½åº¦: ${wrapper ? wrapper.offsetWidth : 'N/A'}px<br>
                    Tabæ•°é‡: ${tabs.length}<br>
                    éœ€è¦æ»šåŠ¨: ${scrollable.scrollWidth > scrollable.clientWidth ? 'æ˜¯' : 'å¦'}<br>
                    æœ€å¤§æ»šåŠ¨: ${scrollable.scrollWidth - scrollable.clientWidth}px
                `;
            }
            
            function updateRealTimeStatus() {
                const scrollPos = scrollable.scrollLeft;
                const maxScroll = scrollable.scrollWidth - scrollable.clientWidth;
                
                realTimeStatus.innerHTML = `
                    å½“å‰æ»šåŠ¨ä½ç½®: ${Math.round(scrollPos)}px<br>
                    æœ€å¤§æ»šåŠ¨ä½ç½®: ${Math.round(maxScroll)}px<br>
                    å·¦æŒ‡ç¤ºå™¨: ${leftIndicator.classList.contains('show') ? 'æ˜¾ç¤º' : 'éšè—'}<br>
                    å³æŒ‡ç¤ºå™¨: ${rightIndicator.classList.contains('show') ? 'æ˜¾ç¤º' : 'éšè—'}
                `;
            }
            
            // æ‰‹åŠ¨æµ‹è¯•æŒ‰é’®
            document.getElementById('force-scroll').addEventListener('click', () => {
                scrollable.scrollTo({ left: 200, behavior: 'smooth' });
            });
            
            document.getElementById('reset-scroll').addEventListener('click', () => {
                scrollable.scrollTo({ left: 0, behavior: 'smooth' });
            });
            
            document.getElementById('toggle-width').addEventListener('click', () => {
                const wrapper = scrollable.querySelector('.youpin-tab-wrapper');
                if (wrapper.style.width) {
                    wrapper.style.width = '';
                } else {
                    wrapper.style.width = '800px';
                }
                setTimeout(() => {
                    updateTabIndicators();
                    updateDiagnosticInfo();
                    updateRealTimeStatus();
                }, 100);
            });
            
            console.log('âœ… è¯Šæ–­é¡µé¢ï¼šåˆ†ç±»å¯¼èˆªæ»šåŠ¨åŠŸèƒ½åˆå§‹åŒ–å®Œæˆ');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initCategoryScrolling();
        });
    </script>
</body>
</html>